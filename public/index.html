<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#dc2626" />
    <meta
      name="description"
      content="Sistema de Administración para Carnicería Muñoz"
    />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!-- Performance: preconnect/dns-prefetch a servicios remotos utilizados -->
    <link rel="dns-prefetch" href="https://www.gstatic.com" />
    <link rel="dns-prefetch" href="https://www.googleapis.com" />
    <link rel="dns-prefetch" href="https://firebase.googleapis.com" />
    <link rel="dns-prefetch" href="https://firestore.googleapis.com" />
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://www.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://firebase.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://firestore.googleapis.com" crossorigin />
    <title>Carnicería Muñoz - Sistema de Administración</title>
  </head>
  <body>
    <noscript>Necesitas habilitar JavaScript para ejecutar esta aplicación.</noscript>
    <div id="root"></div>
    <script>
      // Kill-switch: navegadores con SW viejo → desregistrar y limpiar antes de cargar la app
      (function () {
        try {
          var key = 'sw_hard_recover_v1';
          if ('serviceWorker' in navigator && !localStorage.getItem(key)) {
            Promise.resolve()
              .then(function () { return navigator.serviceWorker.getRegistrations(); })
              .then(function (regs) { return Promise.all(regs.map(function (r) { return r.unregister().catch(function(){}); })); })
              .then(function () { return caches && caches.keys ? caches.keys() : []; })
              .then(function (names) { return Promise.all((names || []).map(function (n) { return caches.delete(n).catch(function(){}); })); })
              .then(function () { localStorage.setItem(key, '1'); location.reload(); })
              .catch(function () {});
          }
        } catch (e) {}
      })();
    </script>
  </body>
</html> 